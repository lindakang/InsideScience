<h2>US, Canada & Japan</h2>

<h3>Background</h3>
<p>This is just for practice and for fun and thus, will only focus on US, Canada and Japan YouTube channels. This will be divided into 3 parts so it won't be too long.</p>

<h3>Dataset</h3>
<p>Dataset link: <a href="https://www.kaggle.com/datasets/rsrishav/youtube-trending-video-dataset" target="_blank">YouTube Trending Video Dataset (updated daily)</a></p>
<p>List of YouTube videos that have been on daily trending list from 2020-08-12 to 2022-10-02.</p>

<h3>Want to know:</h3>
<ol>
    <li>Top 50 channels and videos that appeared the most on trending</li>
    <li>Top 100 channels and videos with the highest views</li>
    <li>Top 10 channels with the highest revenue sharing</li>
</ol>

<h3>YouTube Channel category</h3>
<p>ID - Category name<br> 
1 - Film & Animation<br> 
2 - Autos<br> 
10 - Music<br> 
15 - Pets & Animals<br> 
17 - Sports<br> 
19 - Travel & Events<br> 
20 - Gaming<br> 
21 - Vblogging<br> 
22 - Blogs<br> 
23 - Comedy<br> 
24 - Entertainment<br> 
25 - News & Politics<br> 
26 - Howto & Style<br> 
27 - Education<br> 
28 - Science & Technology<br> 
29 - Nonprofits & Activism<br> 
43 - Shows</p>

<h2>Methods</h2>

<h3>1. Data preparation</h3>
<p>1-1. Load libraries</p>
<pre><code>library(tidyr)
library(tidyverse)
library(tibble)
library(dbplyr)
library(utils)
library(lubridate)</code></pre>

<p>1-2. Import datasets</p>
<pre><code>US <- read_csv("/Users/Linda/Desktop/RStudio/Kaggle/YouTube/US_youtube_trending_data.csv")</code></pre>

<h3>2. Data cleaning</h3>
<p>2-1. Check for duplicates</p>
<pre><code>sum(duplicated(US))  # 83 duplicate
# [1] 83</code></pre>

<p>2-2. Remove duplicates</p>
<pre><code># use distinct() to remove duplicates
US <- distinct(US)

# check if it's removed
sum(duplicated(US))
# [1] 0</code></pre>

<p>2.3 - Extract columns we need</p>
<p>We will only look at these columns: title, channel_title, category_id, trending_date, tags, views, likes, dislikes, comment_count</p>

<pre><code># select columns we need for analysis
# add a "category" column
US_data <- US %>%
  select(title, channelTitle, categoryId, trending_date, tags, view_count, likes, dislikes, comment_count) %>%
  mutate("category" = as.factor(categoryId)) %>%
  mutate(category = recode(category, "1" = "Film", "2" = "Autos", "10" = "Music", "15" = "Pets",
                           "17" = "Sports", "19" = "Travel", "20" = "Gaming", "22" = "Blogs",
                           "23" = "Comedy", "24" = "Entertainment", "25" = "News",
                           "26" = "HowToD", "27" = "Education", "28" = "Science", "29" = "NPO"))

# convert trending date to the date format
US_data$trending_date<- as.Date(US_data$trending_date, format = "%y-%m-%d")

# create a "trending _year" column
US_data <- US_data %>%
  mutate(trending_year = format(trending_date, format = '%Y'))

glimpse(US_data)</code></pre>

<p>2-4. Check for NAs</p>
<p>We check NA now but not at the beginning because we don’t need to care about NAs in the columns that we don’t use.</p>
<pre><code>sum(is.na(US_data)) # 0 NAs
# [1] 0</code></pre>
<p>No NAs in the columns in our final version of dataset.</p>

<h2>3. Data analysis</h2>

<h3>3-1. All categories</h3>
<p>We will start by analyzing all categories and videos to identify general trends from 2020 to the present.</p>

<h4>3-1-1. Number times of trending</h4>
<p>Which category is the most popular (i.e., appears on trending the most frequently) each year between 2020 and present?</p>
<p>To compare categories and years, we first group the data by trending year and category, and then count the number of times each category appears on trending. We use color to indicate the total number of views for each category.</p>

<pre><code># no. times on trending of each category
US_channel_trending <- US_data %>%
  group_by(trending_year, category) %>%
  summarise(chtrending_n = n(),
            ch_views_sum = sum(view_count),
            ch_views_avg = ch_views_sum / chtrending_n) %>%
  as.data.frame()

# Fig 01 - No. times of trending & total views
ggplot(US_channel_trending, aes(y = category, x = chtrending_n, fill = ch_views_sum)) +
  geom_col() +
  facet_grid(. ~trending_year) +
  scale_fill_gradient(low = "light blue", high = "dark blue") +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  labs(title = 'No. of times on trending of each category (total views)',
       x = '# times on Trending',
       y = 'Category')</code></pre>

<div class="image-container">
    <img src="assets/images/20221016/p01_trending-category-total-views.png" alt="Figure 1: Trending category total views">
</div>

<p>The most popular categories for each year between 2020 and present are Entertainment and Gaming videos, as they appeared on trending the most frequently and also had higher total views. It's worth noting that although music was the third most popular category on trending, it had comparable or higher total views than Entertainment and Gaming, which may be due to people rewatching music videos on YouTube.</p>

<pre><code># Fig 02 - No. times on trending & average views per trending time
ggplot(US_channel_trending, aes(y = category, x = chtrending_n, fill = ch_views_avg)) +
  geom_col() +
  facet_grid(. ~trending_year) +
  scale_fill_gradient(low = "light blue", high = "dark blue") +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  labs(title = 'No. times on trending of each category (average views)',
       x = 'No. times on Trending',
       y = 'Category')</code></pre>

<div class="image-container">
    <img src="assets/images/20221016/p02_trending-category-avg-views.png" alt="Figure 2: Trending category average views">
</div>

<p>There aren't many differences between the total views or average views of each category. However, when looking at the average views per trending time, music still has higher or comparable total views to entertainment and gaming.</p>
<p>Next, we identify the channels that have appeared on the trending list more than >200 times. We first group the data by trending year because we want to know what the most popular channels were for each year. Then we group by channel and calculate the number of times each channel appeared on the trending list.</p>

<pre><code># no. times on trending of each channel
US_channel_trending <- US_data %>%
  group_by(trending_year, channelTitle) %>%
  summarise(chtrending_n = n(),
            ch_views_sum = sum(view_count)) %>%
  as.data.frame()

# Channels on Trending for >200 times
US_channel_200trending <- US_channel_trending %>%
  arrange(desc(chtrending_n)) %>%
  filter(chtrending_n > 200)

# Fig 03 - Trending times do not correlate with # views
ggplot(US_channel_200trending, aes(y = channelTitle, x = chtrending_n, fill = ch_views_sum)) +
  geom_col() +
  facet_grid(. ~trending_year) +
  scale_fill_gradient(low = "light blue", high = "dark blue") +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  labs(title = 'Channels on trending >200 times',
       x = 'No. times on trending',
       y = 'YouTube Channels')</code></pre>

<div class="image-container">
    <img src="assets/images/20221016/p03_trending-channels.png" alt="Figure 3: Trending channels">
</div>

<p>It is interesting to note that while Sports is not the most popular category from 2020 to 2022, the NFL and NBA channels are the only channels that have been on trending for more than 400 times each year. This could be due to basketball and football being the two most popular sports in the US.</p>
<p>It is worth mentioning that both of MrBeast's channels, "MrBeast" and "MrBeast Gaming," were on trending over 200 times in 2021, but less than 200 times in 2022, experiencing a significant drop in popularity. However, all channels, except for sports channels, experienced a drop in popularity.</p>
<p>To identify videos that have remained on trending for an extended period, we grouped the data by videos and calculated the number of times they appeared on the trending list consecutively for at least a month.</p>

<pre><code># Videos on Trending for >30 days
USvideo_trending <- US_data %>%
  group_by(title) %>%
  summarise(vtrending_n = n(),
            video_views_sum = sum(view_count),
            category = first(category),
            channelTitle = last(channelTitle)) %>%
  as.data.frame()

US_video_30trending <- USvideo_trending %>%
  arrange(desc(vtrending_n)) %>%
  filter(vtrending_n > 30)

US_video_30trending</code></pre>

<p>Interestingly, SpaceX's Starlink Mission remained on trending for almost half a year, which is a remarkable achievement.</p>

<h4>3-1-2. Highest views</h4>
<p>Now, we only select the top 100 videos with highest views.</p>

<pre><code># rank US videos with top 100 highest views from 2020 to 2022
# total 100 videos
US_channel_top100 <- US_data %>%
  arrange(desc(view_count)) %>%
  slice(1:100)

# rank US videos with top 100 highest views from 2020 to 2022
# total 300 videos = 100 videos per year
US_channel_top100_year <- US_data %>%
  group_by(trending_year) %>%
  arrange(desc(view_count)) %>%
  slice(1:100)

# Category of highest views
US_category_views <- US_channel_top100_year %>%
  group_by(category, trending_year) %>%
  summarise(n_cat_views = n(),
            avg_views = sum(view_count) / n_cat_views) %>%
  as.data.frame()

# Fig 04 - Top 100 views videos are Music and Entertainment
ggplot(US_category_views, aes(y = category, x = n_cat_views, fill = avg_views)) +
  geom_col() +
  facet_grid(. ~trending_year) +
  scale_fill_gradient(low = "light blue", high = "dark blue") +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  labs(title = 'Category of videos with top 100 views (2020 - present)',
       x = '# of trending videos in top 100 views',
       y = 'YouTube Category')</code></pre>

<div class="image-container">
    <img src="assets/images/20221016/p04_trending-categoyr-top100.png" alt="Figure 4: Trending category top 100">
</div>

<p>The most popular category in 2020 was music, which shifted to entertainment in 2021. In 2022, News and music were the two most popular categories.</p>

<pre><code># Fig 05 - Channels with videos of top 100 views: Higher views do not correlate with more likes
ggplot(US_channel_top100, aes(y = channelTitle, x = view_count, alpha = likes)) +
  geom_point(color = "blue") +
  facet_grid(. ~trending_year) +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  labs(title = 'US YouTube Channels with top 100 highest views',
       x = '# of viewss',
       y = 'YouTube Channels')</code></pre>

<div class="image-container">
    <img src="assets/images/20221016/p05_trending-channels-top100.png" alt="Figure 5: Trending channels top 100">
</div>

<p>Black Pink has the highest views.</p>
<p>FFUNTV are mostly shorts!</p>
<p>Big Hit Labels is the former name of HYBE LABELS, which is the company that BTS is belonged to.</p>

<pre><code># Fig 06 - Top 100 viewed videos: Higher views do not correlate with more likes
ggplot(US_channel_top100, aes(y = title, x = view_count, alpha = likes)) +
  geom_point(color = "blue") +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
        plot.title = element_text(hjust = -1)) +
  theme_bw(base_family = "NanumGothic") +
  labs(title = 'Top 100 US YouTube videos with highest views',
       x = '# of views',
       y = 'YouTube videos')</code></pre>

<div class="image-container">
    <img src="assets/images/20221016/p06_top100-viewed-videos.png" alt="Figure 6: Top 100 viewed videos">
</div>

<p>4 / 15 videos of highest views are BTS, Black Pink and shorts.</p>

<h4>3-1-3. Paid by ad views</h4>
<p>We can estimate the revenue sharing for each channel based on the information provided below.</p>
<blockquote>“A good rule of thumb is assuming that only half of your views across the board will be monetized. That said, somewhere around $5-7 per 1,000 views would be the average across all industries.”</blockquote>
